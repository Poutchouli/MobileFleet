====================================================================================================
FLASK APPLICATION FUNCTION INDEX
====================================================================================================
Generated: 2025-07-20 01:03:55
Total Functions: 86


ADMIN FUNCTIONS (25 functions)
--------------------------------------------------------------------------------
ğŸ“ admin_dashboard() [Lines 332-333]
   ğŸ“„ Description: No description available
   ğŸ“¤ Returns: HTML

ğŸ“ admin_import() [Lines 2740-2742]
   ğŸ“„ Description: Serves the CSV import wizard page.
   ğŸ“¤ Returns: HTML

ğŸ“ admin_import_csv() [Lines 385-387]
   ğŸ“„ Description: Serves the CSV data import page.
   ğŸ“¤ Returns: HTML

ğŸ“ admin_phone_numbers() [Lines 350-352]
   ğŸ“„ Description: Serves the page for managing phone numbers.
   ğŸ“¤ Returns: HTML

ğŸ“ admin_phones() [Lines 338-339]
   ğŸ“„ Description: No description available
   ğŸ“¤ Returns: HTML

ğŸ“ admin_provision_wizard() [Lines 378-380]
   ğŸ“„ Description: Serves the multi-step phone provisioning wizard page.
   ğŸ“¤ Returns: HTML

ğŸ“ admin_reports() [Lines 1795-1798]
   ğŸ“„ Description: Serves the main reporting page for Administrators.
   ğŸ“¤ Returns: HTML

ğŸ“ admin_roles() [Lines 371-373]
   ğŸ“„ Description: Serves the page for managing roles.
   ğŸ“¤ Returns: HTML

ğŸ“ admin_sims() [Lines 344-345]
   ğŸ“„ Description: No description available
   ğŸ“¤ Returns: HTML

ğŸ“ admin_users() [Lines 364-366]
   ğŸ“„ Description: Serves the page for managing users.
   ğŸ“¤ Returns: HTML

ğŸ“ admin_workers() [Lines 357-359]
   ğŸ“„ Description: Serves the page for managing workers.
   ğŸ“¤ Returns: HTML

ğŸ“ handle_phone() [Lines 1310-1335]
   ğŸ“ Params: item_id
   ğŸ“„ Description: No description available
   ğŸ“¤ Returns: JSON

ğŸ“ handle_phone_number() [Lines 1478-1550]
   ğŸ“ Params: number_id
   ğŸ“„ Description: API endpoint to get, update, or delete a specific phone number.
   ğŸ“¤ Returns: Unknown

ğŸ“ handle_phone_numbers() [Lines 1404-1473]
   ğŸ“„ Description: API endpoint to get all phone numbers or create a new one.
   ğŸ“¤ Returns: Unknown

ğŸ“ handle_phones() [Lines 1284-1305]
   ğŸ“„ Description: No description available
   ğŸ“¤ Returns: JSON

ğŸ“ handle_role() [Lines 593-635]
   ğŸ“ Params: role_id
   ğŸ“„ Description: API endpoint to get or update a specific role.
   ğŸ“¤ Returns: JSON

ğŸ“ handle_sim() [Lines 1369-1397]
   ğŸ“ Params: item_id
   ğŸ“„ Description: No description available
   ğŸ“¤ Returns: JSON

ğŸ“ handle_sims() [Lines 1341-1364]
   ğŸ“„ Description: No description available
   ğŸ“¤ Returns: JSON

ğŸ“ import_csv() [Lines 826-941]
   ğŸ“„ Description: API endpoint to handle CSV file upload and database processing.
   ğŸ“¤ Returns: JSON

ğŸ“ import_get_schema() [Lines 2796-2856]
   ğŸ“„ Description: Returns the column names and details for a given table.
   ğŸ“¤ Returns: JSON

ğŸ“ import_preview() [Lines 2747-2791]
   ğŸ“„ Description: Handles CSV upload, reads headers and first 5 rows for preview.
   ğŸ“¤ Returns: JSON

ğŸ“ import_process() [Lines 2861-2957]
   ğŸ“„ Description: Processes the CSV data based on user-defined mappings.
   ğŸ“¤ Returns: JSON

ğŸ“ provision_finalize() [Lines 772-819]
   ğŸ“„ Description: Finalizes the provisioning process, creating the assignment and logs.
   ğŸ“¤ Returns: JSON

ğŸ“ provision_get_available_assets() [Lines 747-767]
   ğŸ“„ Description: Gets lists of available SIMs and Workers for assignment.
   ğŸ“¤ Returns: JSON

ğŸ“ provision_validate_phone() [Lines 719-742]
   ğŸ“„ Description: Validates that a phone exists and is in stock for provisioning.
   ğŸ“¤ Returns: JSON


API FUNCTIONS (21 functions)
--------------------------------------------------------------------------------
ğŸ“ create_ticket() [Lines 1706-1772]
   ğŸ“„ Description: API endpoint for Managers to create new support tickets.
   ğŸ“¤ Returns: JSON

ğŸ“ create_user() [Lines 478-520]
   ğŸ“„ Description: API endpoint to create a new user.
   ğŸ“¤ Returns: JSON

ğŸ“ create_worker() [Lines 1587-1616]
   ğŸ“„ Description: API endpoint to create a new worker.
   ğŸ“¤ Returns: JSON

ğŸ“ delete_worker() [Lines 1643-1650]
   ğŸ“ Params: worker_id
   ğŸ“„ Description: API endpoint to 'delete' a worker by setting their status to 'Inactive'.
   ğŸ“¤ Returns: JSON

ğŸ“ get_asset_lifecycle() [Lines 2428-2689]
   ğŸ“ Params: identifier
   ğŸ“„ Description: Get complete lifecycle history for a phone by asset tag or serial number. This provides a chronological timeline of all events for auditing and tracking.
   ğŸ“¤ Returns: Unknown

ğŸ“ get_assignment_overview() [Lines 1988-2025]
   ğŸ“„ Description: Provides a comprehensive overview of all current assignments, joining workers, phones, SIMs, and phone numbers.
   ğŸ“¤ Returns: Unknown

ğŸ“ get_dashboard_charts() [Lines 2263-2376]
   ğŸ“„ Description: Provides chart data for interactive dashboard visualizations.
   ğŸ“¤ Returns: Unknown

ğŸ“ get_db() [Lines 194-205]
   ğŸ“„ Description: No description available
   ğŸ“¤ Returns: Unknown

ğŸ“ get_inventory_summary() [Lines 2163-2233]
   ğŸ“„ Description: Provides a comprehensive inventory summary with counts and availability.
   ğŸ“¤ Returns: Unknown

ğŸ“ get_locale() [Lines 31-36]
   ğŸ“„ Description: No description available
   ğŸ“¤ Returns: Unknown

ğŸ“ get_missing_data_report() [Lines 2032-2158]
   ğŸ“„ Description: Comprehensive report to identify missing or incomplete data across the system.
   ğŸ“¤ Returns: Unknown

ğŸ“ get_phone_history() [Lines 3047-3071]
   ğŸ“ Params: phone_id
   ğŸ“„ Description: API endpoint to get the asset history log for a specific phone.
   ğŸ“¤ Returns: Unknown

ğŸ“ get_secteurs() [Lines 1557-1564]
   ğŸ“„ Description: API endpoint to get a list of all secteurs.
   ğŸ“¤ Returns: JSON

ğŸ“ get_summary_stats() [Lines 2240-2258]
   ğŸ“„ Description: Provides key summary statistics for the admin dashboard.
   ğŸ“¤ Returns: JSON

ğŸ“ get_users() [Lines 461-473]
   ğŸ“„ Description: API endpoint to get all users with role information.
   ğŸ“¤ Returns: JSON

ğŸ“ get_worker_assignments() [Lines 2381-2423]
   ğŸ“„ Description: Provides a list of all active workers and their currently assigned assets.
   ğŸ“¤ Returns: Unknown

ğŸ“ get_worker_history() [Lines 3076-3128]
   ğŸ“ Params: worker_id
   ğŸ“„ Description: API endpoint to get the ticket and assignment history for a specific worker.
   ğŸ“¤ Returns: Unknown

ğŸ“ get_workers() [Lines 1569-1582]
   ğŸ“„ Description: API endpoint to get a list of all active workers with their sector name.
   ğŸ“¤ Returns: JSON

ğŸ“ update_ticket_properties() [Lines 1870-1928]
   ğŸ“ Params: ticket_id
   ğŸ“„ Description: API endpoint for Support to update a ticket's core properties like status, priority, or assignment.
   ğŸ“¤ Returns: Unknown

ğŸ“ update_user() [Lines 525-588]
   ğŸ“ Params: user_id
   ğŸ“„ Description: API endpoint to update an existing user.
   ğŸ“¤ Returns: Unknown

ğŸ“ update_worker() [Lines 1621-1638]
   ğŸ“ Params: worker_id
   ğŸ“„ Description: API endpoint to update an existing worker.
   ğŸ“¤ Returns: JSON


AUTH FUNCTIONS (5 functions)
--------------------------------------------------------------------------------
ğŸ“ change_password() [Lines 641-712]
   ğŸ“„ Description: Allows users to change their own password. Requires current password validation for security.
   ğŸ“¤ Returns: JSON

ğŸ“ login() [Lines 245-291]
   ğŸ“„ Description: No description available
   ğŸ“¤ Returns: HTML

ğŸ“ login_required() [Lines 222-231]
   ğŸ“ Params: f
   ğŸ“„ Description: No description available
   ğŸ“¤ Returns: JSON

ğŸ“ logout() [Lines 294-299]
   ğŸ“„ Description: No description available
   ğŸ“¤ Returns: Redirect

ğŸ“ profile() [Lines 324-326]
   ğŸ“„ Description: Serves the user profile page for password management.
   ğŸ“¤ Returns: HTML


INTEGRATION FUNCTIONS (4 functions)
--------------------------------------------------------------------------------
ğŸ“ create_phone_request() [Lines 3262-3293]
   ğŸ“„ Description: API endpoint for an Integration Manager to submit a new phone request.
   ğŸ“¤ Returns: JSON

ğŸ“ get_integration_requests() [Lines 3224-3257]
   ğŸ“„ Description: API endpoint to get all phone requests submitted by the current integration manager.
   ğŸ“¤ Returns: Unknown

ğŸ“ integration_dashboard() [Lines 399-401]
   ğŸ“„ Description: Serves the dashboard for Integration Managers to see their requests.
   ğŸ“¤ Returns: HTML

ğŸ“ integration_new_request() [Lines 406-408]
   ğŸ“„ Description: Serves the form for an Integration Manager to request a new phone.
   ğŸ“¤ Returns: HTML


MANAGER FUNCTIONS (11 functions)
--------------------------------------------------------------------------------
ğŸ“ add_manager_comment() [Lines 1171-1221]
   ğŸ“ Params: ticket_id
   ğŸ“„ Description: API endpoint for managers to add comments to their tickets.
   ğŸ“¤ Returns: JSON

ğŸ“ get_manager_selectable_phones() [Lines 1038-1067]
   ğŸ“„ Description: API endpoint to get all phones assigned to workers under the current manager, formatted for ticket creation dropdown.
   ğŸ“¤ Returns: Unknown

ğŸ“ get_manager_team_status() [Lines 976-1033]
   ğŸ“„ Description: API endpoint to get the status of all workers and their assigned assets for the currently logged-in manager.
   ğŸ“¤ Returns: Unknown

ğŸ“ get_manager_ticket_details() [Lines 1112-1164]
   ğŸ“ Params: ticket_id
   ğŸ“„ Description: API endpoint for a manager to get details for a specific ticket they reported. Internal notes are filtered out for security.
   ğŸ“¤ Returns: JSON

ğŸ“ get_manager_tickets() [Lines 1072-1107]
   ğŸ“„ Description: API endpoint to get all tickets submitted by the current manager.
   ğŸ“¤ Returns: Unknown

ğŸ“ manager_confirm_receipt() [Lines 3194-3217]
   ğŸ“ Params: ticket_id
   ğŸ“„ Description: Allows a Manager to confirm receipt of a new phone and provide return details.
   ğŸ“¤ Returns: JSON

ğŸ“ manager_create_ticket() [Lines 967-969]
   ğŸ“„ Description: Serves the create ticket page for a manager.
   ğŸ“¤ Returns: HTML

ğŸ“ manager_dashboard() [Lines 946-948]
   ğŸ“„ Description: Serves the main dashboard for Managers.
   ğŸ“¤ Returns: HTML

ğŸ“ manager_ticket_detail() [Lines 960-962]
   ğŸ“ Params: ticket_id
   ğŸ“„ Description: Serves the detailed ticket view page for a manager.
   ğŸ“¤ Returns: HTML

ğŸ“ manager_tickets() [Lines 953-955]
   ğŸ“„ Description: Serves the page for a manager to view their submitted tickets.
   ğŸ“¤ Returns: HTML

ğŸ“ resolve_manager_ticket() [Lines 1226-1276]
   ğŸ“ Params: ticket_id
   ğŸ“„ Description: API endpoint for managers to mark their tickets as resolved.
   ğŸ“¤ Returns: JSON


OTHER FUNCTIONS (10 functions)
--------------------------------------------------------------------------------
ğŸ“ close_db() [Lines 208-212]
   ğŸ“ Params: e=None
   ğŸ“„ Description: No description available
   ğŸ“¤ Returns: Unknown

ğŸ“ configure_logging() [Lines 159-188]
   ğŸ“„ Description: Configure structured logging for production use.
   ğŸ“¤ Returns: Unknown

ğŸ“ decorated_function() [Lines 236-238]
   ğŸ“„ Description: No description available
   ğŸ“¤ Returns: JSON

ğŸ“ decorator() [Lines 234-239]
   ğŸ“„ Description: No description available
   ğŸ“¤ Returns: JSON

ğŸ“ index() [Lines 310-320]
   ğŸ“„ Description: No description available
   ğŸ“¤ Returns: Redirect

ğŸ“ initiate_phone_swap() [Lines 3170-3189]
   ğŸ“ Params: ticket_id
   ğŸ“„ Description: Logs that a replacement phone is being sent and sets ticket to Pending.
   ğŸ“¤ Returns: JSON

ğŸ“ manage_roles() [Lines 414-456]
   ğŸ“„ Description: API endpoint to get all roles or create a new role.
   ğŸ“¤ Returns: JSON

ğŸ“ migrate_timestamps() [Lines 2962-3042]
   ğŸ“„ Description: Migration endpoint to add timestamp columns to phones table.
   ğŸ“¤ Returns: JSON

ğŸ“ return_assignment() [Lines 2694-2733]
   ğŸ“ Params: assignment_id
   ğŸ“„ Description: Handles the return of an asset from a worker. Sets the assignment's return_date, updates asset statuses, and logs the event.
   ğŸ“¤ Returns: JSON

ğŸ“ set_language() [Lines 302-306]
   ğŸ“ Params: lang
   ğŸ“„ Description: No description available
   ğŸ“¤ Returns: Redirect


SUPPORT FUNCTIONS (8 functions)
--------------------------------------------------------------------------------
ğŸ“ add_ticket_update() [Lines 1933-1960]
   ğŸ“ Params: ticket_id
   ğŸ“„ Description: API endpoint for Support to post a new update (comment) to a ticket.
   ğŸ“¤ Returns: JSON

ğŸ“ get_all_active_tickets() [Lines 1657-1699]
   ğŸ“„ Description: API endpoint for Support to get all tickets that are not yet solved or closed.
   ğŸ“¤ Returns: Unknown

ğŸ“ get_all_tickets_history() [Lines 3135-3165]
   ğŸ“„ Description: API endpoint for Support to get ALL tickets, including solved and closed.
   ğŸ“¤ Returns: Unknown

ğŸ“ get_support_users() [Lines 1965-1981]
   ğŸ“„ Description: API endpoint for Support role to get list of all support users for ticket assignment.
   ğŸ“¤ Returns: JSON

ğŸ“ get_ticket_details() [Lines 1805-1865]
   ğŸ“ Params: ticket_id
   ğŸ“„ Description: API endpoint to get all details for a single ticket, including phone, worker, and all historical updates.
   ğŸ“¤ Returns: Unknown

ğŸ“ support_all_tickets() [Lines 1787-1790]
   ğŸ“„ Description: Serves the page for viewing all tickets, including history.
   ğŸ“¤ Returns: HTML

ğŸ“ support_dashboard() [Lines 392-394]
   ğŸ“„ Description: Serves the main helpdesk dashboard for Support staff.
   ğŸ“¤ Returns: HTML

ğŸ“ support_ticket_detail() [Lines 1779-1782]
   ğŸ“ Params: ticket_id
   ğŸ“„ Description: Serves the detailed view page for a single support ticket.
   ğŸ“¤ Returns: HTML


UTILS FUNCTIONS (2 functions)
--------------------------------------------------------------------------------
ğŸ“ log_event() [Lines 215-219]
   ğŸ“ Params: cursor, asset_type, asset_id, event_type, details
   ğŸ“„ Description: No description available
   ğŸ“¤ Returns: Unknown

ğŸ“ role_required() [Lines 233-241]
   ğŸ“ Params: required_role
   ğŸ“„ Description: No description available
   ğŸ“¤ Returns: JSON


QUICK REFERENCE
--------------------------------------------------------------------------------
Route Functions: